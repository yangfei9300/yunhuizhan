{"version":3,"sources":["uni-app:///main.js","webpack:///D:/project/公司-中视扬帆/云会场-git/pages4/liveing1/liveing1.vue?1c63","webpack:///D:/project/公司-中视扬帆/云会场-git/pages4/liveing1/liveing1.vue?98cf","webpack:///D:/project/公司-中视扬帆/云会场-git/pages4/liveing1/liveing1.vue?f7ff","webpack:///D:/project/公司-中视扬帆/云会场-git/pages4/liveing1/liveing1.vue?31e6","uni-app:///pages4/liveing1/liveing1.vue","webpack:///D:/project/公司-中视扬帆/云会场-git/pages4/liveing1/liveing1.vue?3c0a","webpack:///D:/project/公司-中视扬帆/云会场-git/pages4/liveing1/liveing1.vue?6ac3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","info","menuButton","height","top","videourl","tuihsasa","tuihsasa1","mmm","chatviewhieght","chatview_top","keyheight","commeinptFocus","txt_mp3","commtxt","imgbtn","animationsaIs","liveinfoalert","giftcount","giftSel","giftIs","zanLiveIs","liveInfoInfo","canReconnect","inputFocus","inputInfo","inputModel","ifConnect","chatUrl","socket","biaoqingList","selEmilo","selEmiloAlert","chatContent","taskWebsocket","messageList","chatMsgUserInfo","options","scrooid","menuType","plerContext","uanping","loading","liveplayerContext","bofanginter","ruchangTxt","is_ruchang","tonggaoTxt","renqizhiInfo","thumbsUpContext","thumbsUpTimer","thumbsUpQueue","thumbsUpWidth","thumbsUpHeight","zanCountCLick","IntervalZan","biaoqingUrl","adList","onLoad","onShow","success","setTimeout","console","onUnload","uni","clearInterval","onHide","beforeDestroy","heartCheck","onShareAppMessage","title","imageUrl","path","onShareTimeline","onReady","methods","handleClick","getAdList","axios","then","catch","jiantingClickZan","streamId","likes","thumbsUp","id","timer","opacity","pathData","image","factor","speed","t","getRandom","getRandomInt","generatePathData","x","y","updatePoint","createThumbsAnimate","Object","anmationData","curWidth","curAlpha","that","clearTimeout","getRenqiqzhi","showimggongaoimg","urls","showmoaGetWxInfo","getuserinfoBtn","desc","jiantingLive","getOpenid","wxcode","henghuping","livePlayerCon","toLive","delta","fail","url","kaiboTixing","tmplIds","del_subscribeIndex","subscribeIndexTo","live_id","qihuan","statechange","netstatus","errervideo","menuTypeClick","selEmiloAlertClick","emioldsClicl","getEmild","expressionType","sendMessage","icon","type","to_client_id","to_client_name","content","userinfo","complete","sendDelMessage","sendRenqiMessage","number","createWebSocket","wensocketLogin","client_name","room_id","updatelikes","initWebSocket","_this","message","list","reconnectWebSocket","initZan","live_loadingIndex","toDianzan","getLiveInfo","showimg","giftCountClick","giftIsClick","giftSelClick","sendclick","liveinfoalertlick","txt_mp3Clicl","imgbtnClick","backpage","focusInputblur","focusInput","getKeyhieght","getWindowInfo","weiheight","timeout","timeoutObj","start","stop"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACa;;;AAGpE;AAC4M;AAC5M,gBAAgB,mNAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AChDA;AAAA;AAAA;AAAA;AAAqyB,CAAgB,gzBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCsbzzB;EAGAC;IACA;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MAAA;MACA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;QACA;QACA;QACA;MACA;;MACAC;MACAC;MAGAC;MAEAC;MAAA;MACAC;MACAC;MACAC;MACAC;MAGAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAGAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MAEAC;MAAA;MACAC;IACA;EACA;EAIAC;IAEA;IACA;IACA;MACA;IACA;IACA;IACA;MACA;MACA;MACA;IACA;MACA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EAGA;EACAC;IAAA;IACA;IACA;IACA;IACA;IACA;IACA;MACA;IACA;MACAhE;QACAiE;UACA;YAAA;;YAEAC;cACA;YACA;UAEA;YACAC;UACA;QACA;MACA;IACA;IAEAA;EACA;EACAC;IACAC;IACAC;IACAA;EACA;EACAC;IACAF;EACA;EACA;EACAG;IACA;IACA;IACAN;MACAO;IACA;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IACA;MACAH;MACAC;MACAC;IACA;EACA;EAEAE;IACA;IACA;EACA;EAEAC;IAEA;IACAC;MACA;IACA;IAGA;IACAC;MAAA;MACA;QACA;MACA;MACA,YACAC,gDACAC;QACA;UACA;QAEA;UACA;QACA;MACA,GACAC;QACAlB;MAEA;IACA;IACA;IACAmB;MAAA;MACAnB;MACA;QACA;QACA;QACA;UACAoB;UACAC;QACA;QACA,YACAL,gDACAC;UACA;YACAjB;YACA;YACA;YACA;cACA;cACA;cACA;cACAA;cACA;YACA;UAEA;YACA;UACA;QACA,GACAkB;UACAlB;QAEA;MACA;IACA;IAEA;IACAsB;MACAtB;MACA;MACAA;MACA;MACA;QACAuB;QACAC;QACAC;QACAC;QACAC;QACAC;UACAC;UACAC;QACA;MACA;MACA;QACA;MACA;QACA;QACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACA5F;MACA;QACA6F;QACAC;MACA;MACA;QACAD;QACAC;MACA;MACA;QACAD;QACAC;MACA;MACA;QACAD;QACAC;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACAF;QACAC;MACA;IACA;IAEAE;MAAA;MACA;QACAhG;MACA;MACAiG;QACA;QACA,yBAGA,mBACAC,uBACAA,oBACA;UALAL;UACAC;QAKA;QACAI;QACA;QACAC;QACAA;QACA;QACAC;QACAA;QACAC;QACAA;QACA;UACA;QACA;QACA;UACA;QACA;MACA;MACAA;MACA;QACAA;UACAA;QACA;MACA;QACAC;QACAD;MACA;IACA;IACA;IAEA;IACAE;MAAA;MACA;QACAxB;MACA;MACA,YACAJ,4CACAC;QACA;UACA;UACA/B;UACA;UACA;QACA;UACA;QACA;MACA,GACAgC;QACAlB;MAEA;IACA;IACA;IACA6C;MACA3C;QACA4C;MACA;IACA;IAEAC;MAAA;MACAlH;QACA2E;QACA;QACAV;UACA;YACA;UACA;QACA;MACA;IACA;IACAkD;MAAA;MACAnH;QACAoH;QAAA;QACAnD;UACAI;UACA;UACA5B;UACAA;UACA;UACA;UACA;UACA;UACA;QACA;MACA;IACA;IAGA4E;MAAA;MACA;QACA;QACA;QACA;QACA;QAEA;UACA;UACA/C;QACA;UACAA;QACA;MACA;IACA;IAEAgD;MAAA;MACA;QACAC;MACA;MACA,YACApC,6CACAC;QACA;UACAf;UACA;QACA;UACA;QACA;MACA,GACAgB;QACAlB;MAEA;IAGA;IAIAqD;MACA;IACA;IACAC;MACA;MACA;IAAA,CACA;IAGAC;MACArD;QACAsD;QACAC;UACAvD;YACAwD;UACA;QACA;MACA;IAEA;IACA;IACAC;MAAA;MACA9H;QACA+H;QACA9D;UACA;YACA;YACA;UACA;YACA;UACA;QACA;MACA;IACA;IACA;IACA+D;MAAA;MACA;QACA;QACA;MACA;MACA,YACA7C,oDACAC;QACA,wBACA;UACA;QACA;MACA,GACAC;IACA;IACA;IACA4C;MAAA;MACA;QACA;QACA;QACAC;QACA;MACA;MACA,YACA/C,gDACAC;QACA,wBACA;UACA;QACA;MACA,GACAC;IACA;IACA8C;MACA;QACA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAjE;MACA;QACA;QACA0C;MACA;IAEA;IACAwB;MACAlE;IACA;IACAmE,sCACA;IAIAC;MACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;QACAC;MACA;MACA,YACAxD,kDACAC;QACA;UACA;QACA;UACA;QACA;MACA,GACAC;IACA;IACA;IACAuD;MAAA;MACA;MACA;QACAvE;UACAM;UACAkE;QACA;QACA;MACA;MACA;QACAxE;UACAM;UACAkE;QACA;QACA;MACA;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACA;QACA7I;MACA;QACAA;MACA;QACAA;QACAA;MACA;MACAA;MACA8D;MACAE;QACAhE;QACA4D;UACAI;YACAM;UACA;UACA;QACA;QACAiD;UACAvD;YACAM;UACA;QACA;QACAwE;UACA9E;UACA;UAEA;UACA;QACA;MACA;IAEA;IACA;IACA+E;MAAA;MACA;MACA;QACA/E;UACAM;UACAkE;QACA;QACA;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAEA7E;QACAhE;QACA4D;UACAI;YACAM;UACA;UACA;QACA;QACAiD;UACAvD;YACAM;UACA;QACA;QACAwE;UACA9E;UACA;UACA;UACA;QACA;MACA;IAEA;IAEAgF;MAAA;MACA;MACA;QACAhF;UACAM;UACAkE;QACA;QACA;MACA;MACA;MACA;QACAC;QACAQ;QACAP;QACAC;QACAC;QACAC;MACA;MACA7E;QACAhE;QACA4D;UACAI;YACAM;UACA;UACA;QAEA;QACAiD;UACAvD;YACAM;UACA;QACA;QACAwE;UACA9E;UACA;UACA;UACA;QACA;MACA;IAEA;IAEAkF;MAAA;MACA;QACApF;QACA;UACA0D;UACAxH;YACA;cACA;YACA;UACA;UACA4D;YACA;UACA;UACA2D,0BACA;UACAuB;QACA;MAEA;QACA;MACA;IACA;IAEA;IACAK;MAAA;MACA;QACAV;QACAW;QACAC;QACA;MACA;MACArJ;MACAgE;QACAhE;QACA8I;UAEA;YACA;cACA;cACA;cACA;cACAhF;YACA;UACA;UAEA;QACA;MACA;IACA;IACA;IACAwF;MACA;MACA;QACA;QACA;QACA;QACAtG;QACAA;QAAA;MACA;IACA;IAEA;IACAuG;MAAA;MACA;MACA;MACA;MACA;MACAvF;QACAwF,yBACAxF;QACA;UACA;UACA;UACA;UACA;QAAA;QAEA;UACAwF;QACA;MACA;MACAxF;QACAA;UACAM;UACAkE;QACA;QACAxE;QACAwF;MACA;MAEAxF;QACAA;QACAwF;QACA;QACA;QACA;QACA;QACAA;QACA;QACApF;MACA;MACAJ;QACAA;QACA;QACA;UACAA;YACAM;YACAkE;UACA;UACA;QACA;QAEA;UACAiB;QACA;QAEA;QACA3F;QACA;UACA;YACA;UACA;UACA;QACA;QAEA;UACA;UACA;YACA;YACA;YACA;UACA;YACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACA;YACA;UACA;YACAA;YACA;YACA;YACA;YACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;cACA;gBACA4F;cACA,OACA;gBACAA;cACA;YAEA;YACAF;YACA;UACA;UACA;QAAA;;QAEA;QACA;UACA;QACA;QACArH;QACAqH;QACAA;QACApF;MACA;IACA;IACAuF;MACA;MACA;QACA;MACA;MAAA;MACAH;MACA;MACAA;MACAA;QAEA;QACA;QACA,kDACA;UACAA;UACAA;QACA;UACAA;QACA;MAGA;IACA;IAEA;IAGA;IACA;IACAI;MACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MAAA;MACA;QACA;QAAA;QACApB;MACA;;MACA,YACA3D,mDACAC;QACA;UACA;UACA;QACA;UACA;QACA;MACA,GACAC;IACA;IACA;IACA8E;MAAA;MAEA;MACA;QACA;QACA;MACA;MAEA;QACA;MACA;MACA,YACAhF,qDACAC;QACA;UACAf;UACA;QACA;UACA;QACA;MACA,GACAgB;IACA;IACA;IACA+E;MAAA;MACA;QACA;MACA;MACA,YACAjF,6CACAC;QACA;UACA;UAEA;YACA;UACA;UAEA;QACA;UACA;QACA;MACA,GACAC;IACA;IAEA;IAEA;IACAgF;MACA;MACArK;QACAiH;MACA;IACA;IACA;IACAqD;MACA;MACA;QACA/I;MACA;QACAA;MACA;MACA;IACA;IACA;IACAgJ;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC,oCACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA1G;UACA;QACA;MACA;IACA;IACA2G;MACAxG;QACAsD;MACA;IACA;IACA;IACAmD;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MACAhL;QACA;MACA;IACA;IAEA;IACAiL;MACA;QACA;QACA;QACA;QACA;QACA;QACA;QACAC;QACA;QACA;QACA;MACA;IACA;EAEA;AACA,GAIA;AAAA;AACA;EACAC;EACAC;EACAC;IACA;IACA;IACA;MACA;MACAhH;QACAhE;QACA8I,kCACA;MACA;IACA;EACA;EACAmC;IACA;EACA;AACA,E;;;;;;;;;;;;;ACjhDA;AAAA;AAAA;AAAA;AAAqoC,CAAgB,inCAAG,EAAC,C;;;;;;;;;;;ACAzpC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages4/liveing1/liveing1.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages4/liveing1/liveing1.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./liveing1.vue?vue&type=template&id=8be8f484&\"\nvar renderjs\nimport script from \"./liveing1.vue?vue&type=script&lang=js&\"\nexport * from \"./liveing1.vue?vue&type=script&lang=js&\"\nimport style0 from \"./liveing1.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages4/liveing1/liveing1.vue\"\nexport default component.exports","export * from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveing1.vue?vue&type=template&id=8be8f484&\"","var components\ntry {\n  components = {\n    likeButton: function () {\n      return import(\n        /* webpackChunkName: \"components/like-button/like-button\" */ \"@/components/like-button/like-button.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = !_vm.uanping ? _vm.adList.length : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      $event.stopPropagation()\n      _vm.selEmiloAlert = true\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveing1.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveing1.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t\r\n\t\t<live-player\r\n\t\tstyle=\"width: 750rpx;height: 100vh;\" \r\n\t\t></live-player>\r\n\t\t\r\n\t\t<view class=\"w-750 asasas\"\r\n\t\t v-if=\"!uanping\"\r\n\t\t style=\"height:100vh;z-index: 0;position: fixed;top: 0rpx;background-color: #FF8E2D;\"\r\n\t\t mode=\"aspectFill\"\r\n\t\t :style=\"{\r\n\t\t\t 'background-image': 'url('+liveInfoInfo.coverImg+')'\r\n\t\t }\"\r\n\t\t></view>  \r\n\t\t  \r\n\t\t<view class=\"topallview \" style=\"z-index:500;min-height: 150rpx;\"\r\n\t\t  v-if=\"!uanping\"\r\n\t\t :style=\"{\r\n\t\t\twidth:info.safeArea.width+'px',\r\n\t\t\theight:(menuButton.height+menuButton.top+8)+'px',\r\n\t\t\ttop:'0px'    \r\n\t\t}\">\r\n\t\t\t<view class=\"capsulevioew roww center_center\" :style=\"{\r\n\t\t\t\twidth:menuButton.left+'px',\r\n\t\t\t\theight:(menuButton.height)+'px',\r\n\t\t\t\ttop:(menuButton.top)+'px',\r\n\t\t\t}\">  \r\n\t\t\t\t<view class=\"w-20\"></view>\r\n\t\t\t\t\r\n\t\t\t\t<view hover-class=\"none\"\r\n\t\t\t\t@click.stop=\"toLive\" style=\"padding-right: 30rpx;\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<image src=\"/static/zuojiantou.png\" \r\n\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\twidth:(menuButton.height)/2+'px',\r\n\t\t\t\t\t\theight:(menuButton.height)/2+'px'\r\n\t\t\t\t\t}\"></image>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view style=\"width:20rpx;\"></view>\r\n\t\t\t\t<view class=\"roww center_center infoview\" style=\"padding:5rpx 0rpx;\" :style=\"{\r\n\t\t\t\t\t'max-width':(menuButton.left-50)+'px',\r\n\t\t\t\t}\">\r\n\t\t\t\t\t<view class=\"w-10\"></view>\r\n\t\t\t\t\t<image :src=\"liveInfoInfo.coverImg\" mode=\"aspectFill\" class=\"dramaIcon\"></image>\r\n\t\t\t\t\t<view class=\"colonn allline\">\r\n\t\t\t\t\t\t<view class=\"fs-20 color6_r txtShowLength\">{{liveInfoInfo.name?liveInfoInfo.name:''}}</view>\r\n\t\t\t\t\t\t<view class=\"popularity m-top-5\">{{renqizhiInfo.params?renqizhiInfo.params.views:0}}人气值</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"w-20\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<view class=\"colonn\" style=\"position: fixed;\" :style=\"{\r\n\t\t\ttop:((!uanping)?(menuButton.height+menuButton.top+8):0)+'px',\r\n\t\t}\">\r\n\t\t\t<view class=\"roww p-all-15\"\r\n\t\t\tv-if=\"!uanping\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"roww zhibotixingview rowsa center_center\" @click.stop=\"kaiboTixing\">\r\n\t\t\t\t\t<image src=\"/static/zhibxq_03.png\" class=\"naozhogicon\"></image>\r\n\t\t\t\t\t<view>直播提醒</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"allline roww center_center\">\r\n\t\t\t\t\t<view class=\"dianzana\">{{renqizhiInfo.likes_str?renqizhiInfo.likes_str:0}}本场点赞</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"gengduojieshao roww center_center\"\r\n\t\t\t\t@click.stop=\"liveinfoalertlick\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<view>更多介绍</view>\r\n\t\t\t\t\t<image src=\"/static/xiajiantou2.png\" class=\"w-30 h-30 m-left-10\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 视频 -->\r\n\t\t\t\r\n\t\t\t<video\r\n\t\t\tid=\"liveplayerid\"\r\n\t\t\tclass=\"pore\"\r\n\t\t\t :src=\"liveInfoInfo.pullAddr\" \r\n\t\t\t :class=\"{\r\n\t\t\t\t 'henghea':uanping,\r\n\t\t\t\t 'uanpinga':!uanping,\r\n\t\t\t }\"\r\n\t\t\t object-fit=\"contain\"\r\n\t\t\t autoplay \r\n\t\t\t min-cache=\"10\"\r\n\t\t\t max-cache=\"30\"\r\n\t\t\t @statechange=\"statechange\" \r\n\t\t\t :poster=\"liveInfoInfo.shareImgUrl\"\r\n\t\t\t @netstatus=\"netstatus\"\r\n\t\t\t @error=\"error\" \r\n\t\t\t  picture-in-picture-mode=\"push\"\r\n\t\t\t\t:orientation=\"!uanping?'vertical':'horizontal'\"\r\n\t\t\t >\r\n\t\t\t\t<!-- <image src=\"/static/caozuozhinan.png\"\r\n\t\t\t\t style=\"width:750rpx;height:430rpx;\"  \r\n\t\t\t\t v-show=\"loading&&!uanping\"\r\n\t\t\t\t  mode=\"aspectFill\"\r\n\t\t\t\t ></image>\r\n\t\t\t\t \r\n\t\t\t\t\r\n\t\t\t\t <block v-if=\"!loading\">\r\n\t\t\t\t\t <cover-image v-if=\"!uanping\"  src=\"/static/kai.png\" class=\"chushihuaquanpuing\"\r\n\t\t\t\t\t  @click.top=\"henghuping\">全屏</cover-image>   \r\n\t\t\t\t\t  </block>\r\n\t\t\t\t\t  \r\n\t\t\t\t\t  <cover-image v-if=\"uanping\"    src=\"/static/guan.png\"   class=\"henbgzhquan\"\r\n\t\t\t\t\t   @click.top=\"henghuping\">横着</cover-image> -->\r\n\t\t\t\t \r\n\t\t\t </video>\r\n\t\t\t\r\n\r\n\t\t\t\r\n\t\t</view>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t<view style=\"width:600rpx;padding-left:20rpx;z-index: 1001;\"\r\n\t\tclass=\"colonn  pore\"\r\n\t\t v-if=\"!uanping\"\r\n\t\t :style=\"{\r\n\t\t\theight:chatviewhieght+'px',\r\n\t\t\t'margin-top':chatview_top+'px'\r\n\t\t}\" >\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<scroll-view \r\n\t\t\t:scroll-into-view=\"scrooid\"\r\n\t\t\tscroll-y \r\n\t\t\tstyle=\"width: 500rpx;\"\r\n\t\t\t:style=\"{\r\n\t\t\t\theight:chatviewhieght+'px',\r\n\t\t\t}\"\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t<view class=\"colonn\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<swiper autoplay class=\"w-500 m-bottom-30\" v-if=\"adList.length>0\"\r\n\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\theight:(chatviewhieght/3)+'px', \r\n\t\t\t\t\t}\" \r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<swiper-item class=\"w-500\" v-for=\"(item,index) in adList\"\r\n\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\theight:(chatviewhieght/3)+'px', \r\n\t\t\t\t\t\t}\" \r\n\t\t\t\t\t\t@click.stop=\"thumbsUp\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image :src=\"item.adImage\"\r\n\t\t\t\t\t\t\t:style=\"{\r\n\t\t\t\t\t\t\t\theight:(chatviewhieght/3)+'px', \r\n\t\t\t\t\t\t\t}\" style=\"width: 500rpx;background-color: red;border-radius: 15rpx;\"\r\n\t\t\t\t\t\t\tmode=\"aspectFill\"\r\n\t\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t</swiper>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 公告 -->\r\n\t\t\t\t\t<!-- <view class=\" roww \" style=\"max-width: 500rpx;\" v-if=\"liveInfoInfo.streamNotice||liveInfoInfo.streamNoticeImg\">\r\n\t\t\t\t\t\t<view class=\"colonn chatitem\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"  fs-30 liaotianitem1\"\r\n\t\t\t\t\t\t\tstyle=\"color: #FF8E2D;padding-left:10rpx;padding-right:10rpx;font-size:30rpx;\" >\r\n\t\t\t\t\t\t\t\t系统公告：\r\n\t\t\t\t\t\t\t\t<text style=\"line-height:40rpx;color: red;font-size:30rpx;\"\r\n\t\t\t\t\t\t\t\t>{{liveInfoInfo.streamNotice}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"   liaotianitem1\"\r\n\t\t\t\t\t\t\tstyle=\"color: #FF8E2D;padding-left:10rpx;padding-right:10rpx;font-size:30rpx;\" \r\n\t\t\t\t\t\t\t:class=\"{\r\n\t\t\t\t\t\t\t\t'tupians':liveInfoInfo.streamNotice==''\r\n\t\t\t\t\t\t\t}\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<block v-if=\"liveInfoInfo.streamNotice==''\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"yincang1\">系统公告：</text>\r\n\t\t\t\t\t\t\t\t</block>  \r\n\t\t\t\t\t\t\t\t<image    \r\n\t\t\t\t\t\t\t\t @click.stop=\"showimggongaoimg(liveInfoInfo.streamNoticeImg)\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t :src=\"liveInfoInfo.streamNoticeImg\" v-if=\"liveInfoInfo.streamNoticeImg\" class=\"w-200 m-top-10 m-left-00 m-bottom-10 h-200\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\r\n\t\t\t\t\t<block v-for=\"(item,index) in messageList\">\r\n\t\t\t\t\t\t<block v-if=\"item.type=='say'&&item.content!=''\">\r\n\t\t\t\t\t\t\t<!-- 普通用户聊天 -->\r\n\t\t\t\t\t\t\t<view class=\" roww \" style=\"max-width: 400rpx;\" >\r\n\t\t\t\t\t\t\t\t<view class=\" fs-30 chatitem liaotianitem1\" \r\n\t\t\t\t\t\t\t\tstyle=\"color: #FF8E2D;padding-left:10rpx;padding-right:10rpx;font-size: 30rpx;\" >\r\n\t\t\t\t\t\t\t\t\t{{item.userinfo.client_name}}：\r\n\t\t\t\t\t\t\t\t\t<text style=\"line-height:40rpx;color: #ffffff;font-size:30rpx;\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"item.userinfo.type!=3\"\r\n\t\t\t\t\t\t\t\t\t>{{item.content}}</text>\r\n\t\t\t\t\t\t\t\t\t<text style=\"line-height:40rpx;color: red;font-size:30rpx;\"\r\n\t\t\t\t\t\t\t\t\tv-if=\"item.userinfo.type==3\"\r\n\t\t\t\t\t\t\t\t\t>{{item.content}}</text>\r\n\t\t\t\t\t\t\t\t\t<text style=\"color: red;padding-left:10rpx;\" v-if=\"chatMsgUserInfo.type==3\" \r\n\t\t\t\t\t\t\t\t\t@click.stop=\"sendDelMessage(item)\"\r\n\t\t\t\t\t\t\t\t\t>删除</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- \t<block v-if=\"item.type=='login'\">\r\n\t\t\t\t\t\t\t<view class=\" roww \" style=\"max-width: 500rpx;\" >\r\n\t\t\t\t\t\t\t\t<view class=\"  chatitem liaotianitem1\" \r\n\t\t\t\t\t\t\t\tstyle=\"color: #FF8E2D;padding-left:10rpx;\" >\r\n\t\t\t\t\t\t\t\t\t{{item.client_name}}：\r\n\t\t\t\t\t\t\t\t\t<text style=\"line-height:40rpx;color: #ffffff;font-size:25rpx;\">进来了</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block> -->\r\n\t\t\t\t\t\t<!-- <block v-if=\"item.type=='logout'\">\r\n\t\t\t\t\t\t\t<view class=\" roww \" style=\"max-width: 500rpx;\" >\r\n\t\t\t\t\t\t\t\t<view class=\"  chatitem liaotianitem1\" \r\n\t\t\t\t\t\t\t\tstyle=\"color: #FF8E2D;padding-left:10rpx;\" >\r\n\t\t\t\t\t\t\t\t\t{{item.from_client_name}}：\r\n\t\t\t\t\t\t\t\t\t<text style=\"line-height:40rpx;color: #ffffff;font-size:25rpx;\">出去了</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block> -->        \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<block v-if=\"item.type=='say'&&item.image\">\r\n\t\t\t\t\t\t\t<view class=\"roww\">\r\n\t\t\t\t\t\t\t\t<view class=\"fs-30 center_center roww chatitem\">\r\n\t\t\t\t\t\t\t\t\t<text style=\"color: #FF8E2D;padding-left:10rpx;\" >{{item.userinfo.client_name}}：</text>\r\n\t\t\t\t\t\t\t\t\t<image class=\"chatimg\" \r\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" \r\n\t\t\t\t\t\t\t\t\t:src=\"item.image\" \r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t<text style=\"color: red;padding-left:10rpx;\"  \r\n\t\t\t\t\t\t\t\t\tv-if=\"chatMsgUserInfo.type==3\" \r\n\t\t\t\t\t\t\t\t\t@click.stop=\"sendDelMessage(item)\"\r\n\t\t\t\t\t\t\t\t\t>删除</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<view class=\"\" :id=\"scrooid\"></view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t\r\n\t\t</view>\r\n\r\n\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"roww rowsb p-left-25 p-right-25\" \r\n\t\t\t\t\t\tstyle=\"position: fixed;bottom:72rpx;width:750rpx;\"\r\n\t\t\t\t\t\t v-if=\"!uanping\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<!-- <block v-if=\"liveInfoInfo.is_message==1\"> -->\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t<block v-if=\"chatMsgUserInfo.client_name=='游客'\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"shurukuangview pore roww center_center\"\r\n\t\t\t\t\t\t\t\t\t@click.stop=\"getuserinfoBtn\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"w-20\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"shuodianshenm\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t>请先授权..</view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t<image src=\"/static/live/biaoqing.png\"\r\n\t\t\t\t\t\t\t\t\t\t\t class=\"w-38 h-38\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t<block v-else>\r\n\t\t\t\t\t\t\t\t<!-- @click.stop=\"menuTypeClick\" -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"shurukuangview roww center_center\"\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t @click.stop=\"menuTypeClick\" \r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"w-20\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"shuodianshenm\"\r\n\t\t\t\t\t\t\t\t\t\t\t>说点什么..</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"allline\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<image @click.stop=\"selEmiloAlert=true\" \r\n\t\t\t\t\t\t\t\t\t\tsrc=\"/static/biaoqing.png\"\r\n\t\t\t\t\t\t\t\t\t\t style=\"z-index: 5000;\"\r\n\t\t\t\t\t\t\t\t\t\t class=\"w-38 h-38\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t<!-- </block> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"liwuclick roww center_center\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<like-button src=\"/static/zhibxq_10.png\" \r\n\t\t\t\t\t\t\t\twidth=\"50\"\r\n\t\t\t\t\t\t\t\t@handleClick=\"handleClick\"\r\n\t\t\t\t\t\t\t\theight=\"50\"\r\n\t\t\t\t\t\t\t\t:throttle=\"100\" :large=\"2\">\r\n\t\t\t\t\t\t\t\t<!-- <image src=\"/static/zhibxq_10.png\" class=\"w-39 h-39\"></image> -->\r\n\t\t\t\t\t\t\t\t</like-button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<!-- \t<likeButton :throttle=\"100\" :large=\"2\">\r\n\t\t\t\t\t\t\t  <button type=\"success\">点赞</button>\r\n\t\t\t\t\t\t\t</likeButton> -->\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\t<view class=\"colonn livebigvi animated \"\r\n\t\t \r\n\t\t v-if=\"liveinfoalert\">\r\n\t\t\t<view class=\"roww rowsb w-710 p-bottom-15\">\r\n\t\t\t\t<image class=\"w-50 h-50 yincang1\"   src=\"/static/guabibi.png\"></image>\r\n\t\t\t\t<view style=\"color: white;\">直播简介</view>\r\n\t\t\t\t<image class=\"w-50 h-50\"\r\n\t\t\t\t @click.stop=\"liveinfoalertlick\"\r\n\t\t\t\t src=\"../../static/guabibi.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view\r\n\t\t\tscroll-y\r\n\t\t\tstyle=\"height:360rpx;\"\r\n\t\t\t>\r\n\t\t\t<view class=\"liveinfo\" style=\"color: white;font-size: 30rpx;\">\r\n\t\t\t\t<rich-text :nodes=\"liveInfoInfo.streamDescription\"></rich-text>\r\n\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<view class=\"huuibeijing\"\r\n\t\tv-if=\"selEmiloAlert\" style=\"z-index: 50000;\"\r\n\t\t>\r\n\t\t\t<view style=\"width: 750rpx;position: fixed;bottom: 0rpx;\"\r\n\t\t\tclass=\"colonn\"\r\n\t\t\t>\r\n\t\t\t<view class=\"roww  center_center\">\r\n\t\t\t\t<image src=\"/static/guabibi.png\" \r\n\t\t\t\t@click.stop=\"selEmiloAlertClick\"\r\n\t\t\t\tclass=\"w-70 h-70 m-bottom-30\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view \r\n\t\t\tclass=\"background1 colonn\"\r\n\t\t\tstyle=\"height: 400rpx;\">\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t<swiper class=\"w-750 h-400\">\r\n\t\t\t\t<swiper-item  class=\"w-750 h-400\">\r\n\t\t\t\t\t<view class=\"huanhang\">\r\n\t\t\t\t\t\t<view class=\"colonn \" style=\"padding:15rpx 10rpx;\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in biaoqingList\"\r\n\t\t\t\t\t\t @click=\"sendMessage('img',biaoqingUrl+item.expressionUrl)\" v-if=\"index<50\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image lazy-load mode=\"aspectFill\" :src=\"biaoqingUrl+item.expressionUrl\" class=\"w-55 h-55\"></image>\r\n\t\t\t\t\t\t</view>   \r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t\t<swiper-item  class=\"w-750 h-400\">\r\n\t\t\t\t\t<view class=\"huanhang\">\r\n\t\t\t\t\t\t<view class=\"colonn \" style=\"padding:15rpx 10rpx;\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in biaoqingList\"\r\n\t\t\t\t\t\t  @click=\"sendMessage('img',biaoqingUrl+item.expressionUrl)\" v-if=\"index>=50&&index<100\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image lazy-load :src=\"biaoqingUrl+item.expressionUrl\"  class=\"w-55 h-55\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>   \r\n\t\t\t\t<swiper-item  class=\"w-750 h-400\">\r\n\t\t\t\t\t<view class=\"huanhang\">\r\n\t\t\t\t\t\t<view class=\"colonn \" style=\"padding:15rpx 10rpx;\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in biaoqingList\"\r\n\t\t\t\t\t\t @click=\"sendMessage('img',biaoqingUrl+item.expressionUrl)\"  v-if=\"index>=100\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image lazy-load :src=\"biaoqingUrl+item.expressionUrl\"  class=\"w-55 h-55\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper>\r\n\t\t\t  \r\n\t\t\t\r\n\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<view class=\"roww background1 width center_center\"\r\n\t\tstyle=\"padding:20rpx; 20rpx;position: fixed;z-index:999999;\"\r\n\t\t:style=\"{\r\n\t\t\t'bottom':keyheight+'px'\r\n\t\t}\"\r\n\t\tv-if=\"menuType\"\r\n\t\t>   \r\n\t\t<view style=\"width:10rpx;\"></view>\r\n\t\t<view class=\"allline\"\r\n\t\t style=\"background-color: #f5f5f5;border-radius: 100rpx;padding:10rpx 20rpx;\"\r\n\t\t>\t<view style=\"width:30rpx;\"></view>\r\n\t\t\t<input placeholder=\"请输入内容\"\r\n\t\t\tclass=\"allline fs-30\"\r\n\t\t\t@blur=\"focusInputblur\"\r\n\t\t\t:focus=\"commeinptFocus\" \r\n\t\t\tv-model=\"inputInfo\"\r\n\t\t\tcursor-spacing=\"10\"\r\n\t\t\t:adjust-position=\"false\"\r\n\t\t\tplaceholder-class=\" fs-30\"\r\n\t\t\t/>\r\n\t\t\t<view style=\"width:30rpx;\"></view>\r\n\t\t\t</view>\r\n\t\t\t<view style=\"width:25rpx;\"></view>\r\n\t\t\t<view class=\"sendbtn\"\r\n\t\t\t @click=\"sendMessage('say')\"\r\n\t\t\t >发送</view>\r\n\t\t</view>\r\n\t\t\r\n\t</view>\r\n</template>\r\n<script>\r\n\t\r\n\texport default {\r\n\t\t\r\n\t\t\r\n\t\tdata() {\r\n\t\t\treturn { \r\n\t\t\t\tinfo: {},\r\n\t\t\t\tmenuButton: {\r\n\t\t\t\t\theight:50,\r\n\t\t\t\t\ttop:50,\r\n\t\t\t\t},\r\n\t\t\t\tvideourl: \"https://res.oss.zhuyin.club/res/0/87/video/2/202108/11/2021081111359-5153.mp4\",\r\n\t\t\t\ttuihsasa:\"http://south01.cn.grustv.com:8882/hls/1056831647.m3u8\",\r\n\t\t\t\ttuihsasa1:\"rtmp://play-pc.ourwill.cn/live/tw-1854463-9755wito_hd?txSecret=623a001bc0e12f4e7102162fbe3c73a0&txTime=62AAEA3B\",\r\n\t\t\t\tmmm:'http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400',\r\n\t\t\t\tchatviewhieght: 0, //聊天框高度\r\n\t\t\t\tchatview_top: 0, //聊天框距离顶部的位置\r\n\t\t\t\tkeyheight: 0, //键盘高度\r\n\t\t\t\tcommeinptFocus: false, //键盘高度\r\n\t\t\t\ttxt_mp3: 1, //1是文字，2是语音\r\n\t\t\t\tcommtxt: '', //输入的文字\r\n\t\t\t\t\r\n\t\t\t\timgbtn: false,\r\n\t\t\t\tanimationsaIs: false,\r\n\t\t\t\t'liveInfo': '<h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3><h3 style=\"color:white;\">这里是直播简介，可以编写直播介绍内容。</h3>',\r\n\t\t\t\tliveinfoalert: false, //直播简介对话框\r\n\t\t\t\tgiftcount: 1, //礼物个数\r\n\t\t\t\tgiftSel: 0, //选中的礼物的下标\r\n\t\t\t\tgiftIs: false, //礼物弹窗是否显示\r\n\t\t\t\tzanLiveIs:false,//是否点赞\r\n\t\t\t\tliveInfoInfo:{},\r\n\t\t\t\t// 聊天 canReconnect   \r\n\t\t\t\tcanReconnect:true,\r\n\t\t\t\tinputFocus:false,\r\n\t\t\t\tinputInfo:\"\",\r\n\t\t\t\tinputModel:\"\",\r\n\t\t\t\tifConnect: false,\r\n\t\t\t\t\r\n\t\t\t\tchatUrl:\"wss://websocket.qlypt.com\",//聊天链接\r\n\t\t\t\t// chatUrl:\"wss://websocket.qlypt.com\",//聊天链接\r\n\t\t\t\t\r\n\t\t\t\tsocket:null,//websocket实体类  \r\n\t\t\t\tbiaoqingList:[],//表情列表\r\n\t\t\t\tselEmilo:'',  \r\n\t\t\t\tselEmiloAlert:false,\r\n\t\t\t\tchatContent:\"\",//输入聊天内容\r\n\t\t\t\ttaskWebsocket:null,\r\n\t\t\t\tmessageList:[],//聊天列表\r\n\t\t\t\tchatMsgUserInfo:{\r\n\t\t\t\t\t'client_name':'游客',\r\n\t\t\t\t\t'avatar':'https://yjc.qlypt.com/uploads/home/common/default_user_portrait.png',\r\n\t\t\t\t\t'type':'0',//0用户身份1是管理员\r\n\t\t\t\t},\r\n\t\t\t\toptions:{},\r\n\t\t\t\tscrooid:\"scroll\",\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tmenuType:false,\r\n\t\t\t\t\r\n\t\t\t\tplerContext:null,//直播上下文\r\n\t\t\t\tuanping:false,\r\n\t\t\t\tloading:true,\r\n\t\t\t\tliveplayerContext:null,\r\n\t\t\t\tbofanginter:null,\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\truchangTxt:'',//入场了\r\n\t\t\t\tis_ruchang:false,//是否发送进来了消息\r\n\t\t\t\ttonggaoTxt:{},//系统公告\r\n\t\t\t\trenqizhiInfo:{},//人气值信息\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tthumbsUpContext: null,\r\n\t\t\t\tthumbsUpTimer: 0,\r\n\t\t\t\tthumbsUpQueue: {},\r\n\t\t\t\tthumbsUpWidth: 100,\r\n\t\t\t\tthumbsUpHeight: 300,\r\n\t\t\t\tzanCountCLick:0,//点了多少次未提交到后台\r\n\t\t\t\tIntervalZan:null,\r\n\t\t\t\t\r\n\t\t\t\tbiaoqingUrl:'https://qlyjc.oss-cn-hangzhou.aliyuncs.com/home/expression/',//表情前缀\r\n\t\t\t\tadList:[],//广告列表哦\r\n\t\t\t}      \r\n\t\t},\r\n\t\t\r\n\t\t\r\n\t\r\n\t\tonLoad(options) {\r\n\t\t\t\r\n\t\t\tthis.liveplayerContext=uni.createLivePlayerContext(\"liveplayerid\", this)\r\n\t\t\tthis.options = options;\r\n\t\t\tif (options.scene) {\r\n\t\t\t\tthis.options.id = options.scene;\r\n\t\t\t}\r\n\t\t\tvar userInfo=uni.getStorageSync(\"userInfo\");\r\n\t\t\tif(userInfo){\r\n\t\t\t\tthis.chatMsgUserInfo.client_name=userInfo.nickname?userInfo.nickname:'游客';\r\n\t\t\t\tthis.chatMsgUserInfo.avatar=userInfo.userAvatar;\r\n\t\t\t\tthis.chatMsgUserInfo.type=userInfo.userType;\r\n\t\t\t}else{\r\n\t\t\t\tvar wxUser=uni.getStorageSync(\"wxUser\");\r\n\t\t\t\tif(wxUser){\r\n\t\t\t\t\tthis.chatMsgUserInfo.client_name=wxUser.nickName;\r\n\t\t\t\t\tthis.chatMsgUserInfo.avatar=wxUser.avatarUrl;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.showmoaGetWxInfo();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.getWindowInfo();\r\n\t\t\tthis.getKeyhieght();\r\n\t\t\tthis.getLiveInfo();\r\n\t\t\tthis.getRenqiqzhi();\r\n\t\t\tthis.getEmild();\r\n\t\t\tthis.getAdList();\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.initZan();\r\n\t\t\tthis.live_loadingIndex(\"add\");\r\n\t\t\tthis.livePlayerCon();\r\n\t\t\t// 链接聊天\r\n\t\t\tvar openid=uni.getStorageSync(\"openid\");\r\n\t\t\tif(openid){\r\n\t\t\t\tthis.createWebSocket()\r\n\t\t\t}else{\r\n\t\t\t\twx.login({\r\n\t\t\t\t\t      success: (res)=> {\r\n\t\t\t\t\t        if (res.code) {  //wx.login获取code。\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tsetTimeout(res1=>{\r\n\t\t\t\t\t\t\t\t\tthis.getOpenid(res.code);\r\n\t\t\t\t\t\t\t\t},200)   \r\n\t\t\t\t\t            \r\n\t\t\t\t\t        } else {\r\n\t\t\t\t\t          console.log('获取用户登录态失败！' + res.errMsg)\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t      }\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconsole.error(\"is_ruchang606\",this.is_ruchang)\r\n\t\t},\r\n\t\tonUnload() {\r\n\t\t\tuni.closeSocket();\r\n\t\t\tclearInterval(this.bofanginter);\r\n\t\t\tclearInterval(this.IntervalZan)\r\n\t\t},\r\n\t\t onHide() {\r\n\t\t \tuni.closeSocket();\r\n\t\t },\r\n\t\t// 销毁之前钩子\r\n\t\tbeforeDestroy() {\r\n\t\t  this.live_loadingIndex(\"out\");\r\n\t\t  this.canReconnect=false\r\n\t\t\t setTimeout(res=>{\r\n\t\t\t\t heartCheck.stop()\r\n\t\t\t },500)\r\n\t\t},\r\n\t\tonShareAppMessage () {\r\n\t\t        return {\r\n\t\t            title: this.liveInfoInfo.live_name,\r\n\t\t            imageUrl:this.liveInfoInfo.live_banner,\r\n\t\t            path: '/pages1/live_info_1/live_info_1?id='+this.options.id\r\n\t\t        }\r\n\t\t    },\r\n\t\t\t  \r\n\t\tonShareTimeline: function () {\r\n\t\t     return {\r\n\t\t    title: this.liveInfoInfo.live_name,\r\n\t\t    imageUrl:this.liveInfoInfo.live_banner,\r\n\t\t    path: '/pages1/live_info_1/live_info_1?id='+this.options.id\r\n\t\t     }\r\n\t\t },\r\n\t\t \r\n\t\t onReady() {\r\n\t\t \tthis.thumbsUpContext = uni.createCanvasContext('thumsCanvas');\r\n\t\t \tvar that = this;\r\n\t\t }, \r\n\t\t    \r\n\t\tmethods: {\r\n\t\t\t\r\n\t\t\t// 点赞\r\n\t\t\thandleClick(){   \r\n\t\t\t\tthis.zanCountCLick=this.zanCountCLick+1;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// 获取广告列表\r\n\t\t\tgetAdList(){\r\n\t\t\t\tvar data={\r\n\t\t\t\t\t\"streamId\": this.options.id\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.streamstreamAd, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\t\tthis.adList=res.data;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tconsole.error(\"获取openid报错\",err)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 间隔两秒钟如果有赞未提交，就提交上去\r\n\t\t\tjiantingClickZan(){\r\n\t\t\t\tconsole.log(\"asd\");\r\n\t\t\t\tif(this.zanCountCLick>0){\r\n\t\t\t\t\tvar count=this.zanCountCLick;\r\n\t\t\t\t\tthis.zanCountCLick=0;\r\n\t\t\t\t\tvar data={\r\n\t\t\t\t\t\tstreamId:this.options.id,\r\n\t\t\t\t\t\tlikes:count\r\n\t\t\t\t\t};\r\n\t\t\t\t\tthis.$axios\r\n\t\t\t\t\t\t.axios('POST', this.$paths.likesstreamapi, data)\r\n\t\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\t\t\tconsole.log(\"赞结果\",res)\r\n\t\t\t\t\t\t\t\tthis.zanCountCLick=0;\r\n\t\t\t\t\t\t\t\tvar renqizhiInfo=res.data;\r\n\t\t\t\t\t\t\t\tif(this.renqizhiInfo.likes<=renqizhiInfo.likes){\r\n\t\t\t\t\t\t\t\t\tthis.renqizhiInfo.params=renqizhiInfo.params;\r\n\t\t\t\t\t\t\t\t\tthis.renqizhiInfo.likes=renqizhiInfo.likes;\r\n\t\t\t\t\t\t\t\t\tthis.renqizhiInfo.likes_str=this.$tools.numFormat(this.renqizhiInfo.likes);\r\n\t\t\t\t\t\t\t\t\tconsole.log(\"确实打了\",this.renqizhiInfo)\r\n\t\t\t\t\t\t\t\t\tthis.sendMessage('say_zan',count);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\t\tconsole.error(\"获取openid报错\",err)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//点赞动画 start\r\n\t\t\tthumbsUp() {\r\n\t\t\t\tconsole.log(\"开始点赞\")\r\n\t\t\t\tthis.zanCountCLick=this.zanCountCLick+1;\r\n\t\t\t\tconsole.log(\"点赞动画\")\r\n\t\t\t\tconst image = \"../../static/thumbsUpImage/\" + this.getRandomInt(1, 11) + \".png\";\r\n\t\t\t\tconst anmationData = { \r\n\t\t\t\t\tid: new Date().getTime(),\r\n\t\t\t\t\ttimer: 0,\r\n\t\t\t\t\topacity: 0.5,\r\n\t\t\t\t\tpathData: this.generatePathData(),\r\n\t\t\t\t\timage: image,\r\n\t\t\t\t\tfactor: {\r\n\t\t\t\t\t\tspeed: 0.004,\r\n\t\t\t\t\t\tt: 0\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif (Object.keys(this.thumbsUpQueue).length > 0) {\r\n\t\t\t\t\tthis.thumbsUpQueue[anmationData.id] = anmationData;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.thumbsUpQueue[anmationData.id] = anmationData;\r\n\t\t\t\t\tthis.createThumbsAnimate();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetRandom(min, max) {\r\n\t\t\t\treturn Math.random() * (max - min) + min;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgetRandomInt(min, max) {\r\n\t\t\t\treturn Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tgeneratePathData() {\r\n\t\t\t\tlet width = this.thumbsUpWidth,\r\n\t\t\t\t\theight = this.thumbsUpHeight;\r\n\t\t\t\tconst p0 = {\r\n\t\t\t\t\tx: 0.65 * width,\r\n\t\t\t\t\ty: height\r\n\t\t\t\t};\r\n\t\t\t\tconst p1 = {\r\n\t\t\t\t\tx: this.getRandom(0.22 * width, 0.33 * width),\r\n\t\t\t\t\ty: this.getRandom(0.5 * height, 0.75 * height)\r\n\t\t\t\t};\r\n\t\t\t\tconst p2 = {\r\n\t\t\t\t\tx: this.getRandom(0, 0.88 * width),\r\n\t\t\t\t\ty: this.getRandom(0.25 * height, 0.5 * height)\r\n\t\t\t\t};\r\n\t\t\t\tconst p3 = {\r\n\t\t\t\t\tx: this.getRandom(0, 0.88 * width),\r\n\t\t\t\t\ty: this.getRandom(0, 0.125 * height)\r\n\t\t\t\t};\r\n\t\t\t\treturn [p0, p1, p2, p3];\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tupdatePoint(data, factor) {\r\n\t\t\t\tconst p0 = data[0];\r\n\t\t\t\tconst p1 = data[1];\r\n\t\t\t\tconst p2 = data[2];\r\n\t\t\t\tconst p3 = data[3];\r\n\t\t\t\tconst t = factor.t;\r\n\t\t\t\tconst cx1 = 3 * (p1.x - p0.x);\r\n\t\t\t\tconst bx1 = 3 * (p2.x - p1.x) - cx1;\r\n\t\t\t\tconst ax1 = p3.x - p0.x - cx1 - bx1;\r\n\t\t\t\tconst cy1 = 3 * (p1.y - p0.y);\r\n\t\t\t\tconst by1 = 3 * (p2.y - p1.y) - cy1;\r\n\t\t\t\tconst ay1 = p3.y - p0.y - cy1 - by1;\r\n\t\t\t\tconst x = ax1 * (t * t * t) + bx1 * (t * t) + cx1 * t + p0.x;\r\n\t\t\t\tconst y = ay1 * (t * t * t) + by1 * (t * t) + cy1 * t + p0.y;\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx,\r\n\t\t\t\t\ty\r\n\t\t\t\t};\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcreateThumbsAnimate() {\r\n\t\t\t\tlet width = this.thumbsUpWidth,\r\n\t\t\t\t\theight = this.thumbsUpHeight;\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tObject.keys(that.thumbsUpQueue).forEach(key => {\r\n\t\t\t\t\tconst anmationData = that.thumbsUpQueue[+key];\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tx,\r\n\t\t\t\t\t\ty\r\n\t\t\t\t\t} = this.updatePoint(\r\n\t\t\t\t\t\tanmationData.pathData,\r\n\t\t\t\t\t\tanmationData.factor\r\n\t\t\t\t\t);\r\n\t\t\t\t\tconst speed = anmationData.factor.speed;\r\n\t\t\t\t\tanmationData.factor.t += speed;\r\n\t\t\t\t\tvar curWidth = 40;\r\n\t\t\t\t\tcurWidth = (height - y) / 1.5;\r\n\t\t\t\t\tcurWidth = Math.min(40, curWidth);\r\n\t\t\t\t\tvar curAlpha = anmationData.opacity;\r\n\t\t\t\t\tcurAlpha = y / height;\r\n\t\t\t\t\tcurAlpha = Math.min(1, curAlpha);\r\n\t\t\t\t\tthat.thumbsUpContext.globalAlpha = curAlpha;\r\n\t\t\t\t\tthat.thumbsUpContext.drawImage(anmationData.image, x - curWidth / 2, y, curWidth, curWidth);\r\n\t\t\t\t\tif (anmationData.factor.t > 1) {\r\n\t\t\t\t\t\tdelete that.thumbsUpQueue[anmationData.id];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (y > height) {\r\n\t\t\t\t\t\tdelete that.thumbsUpQueue[anmationData.id];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthat.thumbsUpContext.draw();\r\n\t\t\t\tif (Object.keys(that.thumbsUpQueue).length > 0) {\r\n\t\t\t\t\tthat.thumbsUpTimer = setTimeout(() => {\r\n\t\t\t\t\t\tthat.createThumbsAnimate();\r\n\t\t\t\t\t}, 5);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclearTimeout(that.thumbsUpTimer);\r\n\t\t\t\t\tthat.thumbsUpContext.draw();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//点赞动画 end\r\n\t\t\t\r\n\t\t\t// 获取人气值\r\n\t\t\tgetRenqiqzhi(){\r\n\t\t\t\tvar data={\r\n\t\t\t\t\tstreamId:this.options.id\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.streamdata, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\t\tvar renqizhiInfo=res.data;\r\n\t\t\t\t\t\t\trenqizhiInfo.allpeo=renqizhiInfo.viewsFake+renqizhiInfo.viewsReal;\r\n\t\t\t\t\t\t\tthis.renqizhiInfo=renqizhiInfo;\r\n\t\t\t\t\t\t\tthis.renqizhiInfo.likes_str=this.$tools.numFormat(this.renqizhiInfo.likes);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tconsole.error(\"获取openid报错\",err)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 显示通告图片\r\n\t\t\tshowimggongaoimg(img){\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\t\t\turls: [img],\r\n\t\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tshowmoaGetWxInfo(){\r\n\t\t\t\twx.showModal({\r\n\t\t\t\t\ttitle:\"提示\",\r\n\t\t\t\t\t\"content\":\"请先授权个人信息\",\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t if (res.confirm) {\r\n\t\t\t\t\t\t      this.getuserinfoBtn();\r\n\t\t\t\t\t\t    } \r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetuserinfoBtn(){\r\n\t\t\t\t wx.getUserProfile({\r\n\t\t\t\t      desc: '用于完善会员资料', // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\r\n\t\t\t\t      success: (res) => {\r\n\t\t\t\t\t\tuni.setStorageSync(\"wxUser\",res.userInfo);\r\n\t\t\t\t\t\tvar chatMsgUserInfo=this.chatMsgUserInfo;\r\n\t\t\t\t\t\tchatMsgUserInfo.client_name=res.userInfo.nickName;\r\n\t\t\t\t\t\tchatMsgUserInfo.avatar=res.userInfo.avatarUrl;\r\n\t\t\t\t\t\tthis.chatMsgUserInfo=chatMsgUserInfo;\r\n\t\t\t\t\t\tthis.$forceUpdate()\r\n\t\t\t\t\t\tthis.inputInfo=\"进来了\";\r\n\t\t\t\t\t\tthis.sendMessage('say');\r\n\t\t\t\t\t\tthis.is_ruchang=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t    })\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tjiantingLive(){\r\n\t\t\t\tthis.bofanginter=setInterval(res=>{\r\n\t\t\t\tvar now_chuo=  (Date.parse(new Date())+\"\").substring(0,10);\r\n\t\t\t\tvar date = new Date(this.liveInfoInfo.live_apply_play_time);\r\n\t\t\t\t// 有三种方式获取\r\n\t\t\t\tvar time1 = (date.getTime()+\"\").substring(0,10);\r\n\t\t\t\t\r\n\t\t\t\t\tif(now_chuo-time1<=2&&now_chuo-time1>=1){\r\n\t\t\t\t\t\tthis.liveplayerContext.play();\r\n\t\t\t\t\t\tclearInterval(this.bofanginter)\r\n\t\t\t\t\t}else if(now_chuo-time1>10){\r\n\t\t\t\t\t\tclearInterval(this.bofanginter)\r\n\t\t\t\t\t}\r\n\t\t\t\t},1000)\r\n\t\t\t},\r\n\t\t\r\n\t\t\tgetOpenid(code){\r\n\t\t\t\tvar data={\r\n\t\t\t\t\twxcode:code\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('GET', this.$paths.memberwxcode, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif(res.code==200){\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"openid\",res.data);\r\n\t\t\t\t\t\t\tthis.createWebSocket()\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthis.showToast(res.msg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tconsole.error(\"获取openid报错\",err)\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\thenghuping(){\r\n\t\t\t\tthis.uanping=!this.uanping;\r\n\t\t\t},\r\n\t\t\tlivePlayerCon(){\r\n\t\t\t\t// this.plerContext=wx.createLivePlayerContext(\"livePlayer\", this)\r\n\t\t\t\t// this.plerContext.play();\r\n\t\t\t},     \r\n\t\t\t\r\n\t\t\t\r\n\t\t\ttoLive(){  \r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta:1,\r\n\t\t\t\t\tfail:(res)=> {\r\n\t\t\t\t\t\tuni.reLaunch({\r\n\t\t\t\t\t\t\turl:\"/pages/live/live\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 开播提醒\r\n\t\t\tkaiboTixing(){\r\n\t\t\t\twx.requestSubscribeMessage({\r\n\t\t\t\t  tmplIds: ['_EO088PYZT3unO0ZpwYC2ntr6gdpFNIUxhC8gu1C4Qw'],\r\n\t\t\t\t  success: (res)=> { \r\n\t\t\t\t\t  if(res.errMsg.indexOf(\"ok\")>=0){\r\n\t\t\t\t\t\t  this.$tools.showToast(\"订阅成功\");\r\n\t\t\t\t\t\t  this.subscribeIndexTo();\r\n\t\t\t\t\t  }else{\r\n\t\t\t\t\t\t   this.$tools.showToast(\"订阅失败\");\r\n\t\t\t\t\t  }\r\n\t\t\t\t  }\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 取消订阅 \r\n\t\t\tdel_subscribeIndex(){\r\n\t\t\t\tvar data={  \r\n\t\t\t\t\t'touser':uni.getStorageSync(\"openid\"),\r\n\t\t\t\t\t'live_apply_id':this.options.id,\r\n\t\t\t\t}\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.del_subscribeIndex, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.code == 10000) {\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$tools.showToast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {});\r\n\t\t\t},\r\n\t\t\t// 点击订阅\r\n\t\t\tsubscribeIndexTo(type){\r\n\t\t\t\tvar data={  \r\n\t\t\t\t\t'touser':uni.getStorageSync(\"openid\"),\r\n\t\t\t\t\t'live_apply_id':this.options.id,\r\n\t\t\t\t\tlive_id:this.options.id,\r\n\t\t\t\t\t'page':'pages1/live_info_1/live_info_1'\r\n\t\t\t\t}\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.subscribeIndex, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.code == 10000) {\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$tools.showToast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {});\r\n\t\t\t},\r\n\t\t\tqihuan(index){\r\n\t\t\t\tif(index==1){\r\n\t\t\t\t\tthis.tuihsasa=this.videourl;\r\n\t\t\t\t}else if(index==2){\r\n\t\t\t\t\tthis.tuihsasa=this.mmm;\r\n\t\t\t\t}else if(index==3){\r\n\t\t\t\t\tthis.tuihsasa=this.tuihsasa1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstatechange(res){\r\n\t\t\t\tconsole.log(\"statechangestatechange\",res.detail.code == 2004,res)\n\t\t\t\tif (res.detail.code == 2004) {\r\n\t\t\t\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\t\t\t\tthat.loading = false;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tnetstatus(res){\r\n\t\t\t\tconsole.log(\"netstatus\",res)\r\n\t\t\t},\r\n\t\t\terrervideo(res){\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tmenuTypeClick(){\r\n\t\t\t\tthis.menuType=true;\r\n\t\t\t\tthis.commeinptFocus=true;\r\n\t\t\t},\r\n\t\t\tselEmiloAlertClick(){\r\n\t\t\t\tthis.selEmiloAlert=!this.selEmiloAlert;\r\n\t\t\t},\r\n\t\t\temioldsClicl(item){\r\n\t\t\t\tthis.selEmilo=item.expression_url;\r\n\t\t\t},\r\n\t\t\t// 获取表情列表\r\n\t\t\tgetEmild(){\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\texpressionType:'1'\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.streamexpression, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tthis.biaoqingList=res.data;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$tools.showToast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {});\r\n\t\t\t},\r\n\t\t\t// 聊天----开始\r\n\t\t\tsendMessage(type,img) {\r\n\t\t\t  var _this = this\r\n\t\t\t  if (!this.ifConnect) {\r\n\t\t\t    uni.showToast({\r\n\t\t\t      title: '未接入聊天系统',\r\n\t\t\t      icon: 'none'\r\n\t\t\t    });\r\n\t\t\t    return;\r\n\t\t\t  }\r\n\t\t\t  if (!this.inputInfo&&type=='say') {\r\n\t\t\t    uni.showToast({\r\n\t\t\t      title: '请输入聊天内容',\r\n\t\t\t      icon: 'none'\r\n\t\t\t    });\r\n\t\t\t    return;\r\n\t\t\t  }\r\n\t\t\t  this.chatMsgUserInfo.likes=this.renqizhiInfo.likes;\r\n\t\t\t  // 发送聊天信息\r\n\t\t\t  var data={  \r\n\t\t\t\t  type:'say',\r\n\t\t\t\t  to_client_id:'all',\r\n\t\t\t\t  to_client_name:this.liveInfoInfo.live_name,\r\n\t\t\t\t  content:this.inputInfo,\r\n\t\t\t\t  userinfo:this.chatMsgUserInfo\r\n\t\t\t  }  \r\n\t\t\t  if(type=='img'){\r\n\t\t\t\t  data.image=img;\r\n\t\t\t  }else if(type=='say'){\r\n\t\t\t\t  data.content=this.inputInfo;\r\n\t\t\t  }else if(type=='say_zan'){\r\n\t\t\t\t  data.content=\"点赞了\"+img+\"下\";\r\n\t\t\t\t  data.type='say';\r\n\t\t\t  }\r\n\t\t\t  data.userinfo.suiji= data.userinfo.client_name+Math.random()*1000;\r\n\t\t\t console.log(\"发送消息数据\",data)\r\n\t\t\t  uni.sendSocketMessage({\r\n\t\t\t\tdata:JSON.stringify(data),\r\n\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:\"发送成功\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.inputInfo=\"\";\r\n\t\t\t\t},\r\n\t\t\t\tfail:res=>{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:\"发送失败\"\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete:res=>{\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.selEmiloAlert=false;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.menuType=false;\r\n\t\t\t\t\tthis.commeinptFocus=false;\r\n\t\t\t\t},\r\n\t\t\t  })\r\n\t\t\t  \r\n\t\t\t},\r\n\t\t\t// 发送删除消息\r\n\t\t\tsendDelMessage(text) {\r\n\t\t\t  var _this = this\r\n\t\t\t  if (!this.ifConnect) {\r\n\t\t\t    uni.showToast({\r\n\t\t\t      title: '未接入聊天系统',\r\n\t\t\t      icon: 'none'\r\n\t\t\t    });\r\n\t\t\t    return;\r\n\t\t\t  }\r\n\t\t\t   this.chatMsgUserInfo.likes=this.renqizhiInfo.likes;\r\n\t\t\t  var data={  \r\n\t\t\t\t  type:'del',  \r\n\t\t\t\t  to_client_id:'all',\r\n\t\t\t\t  to_client_name:this.liveInfoInfo.live_name,\r\n\t\t\t\t  content:text.userinfo.suiji,\r\n\t\t\t\t  userinfo:this.chatMsgUserInfo\r\n\t\t\t  }  \r\n\t\t\t     \r\n\t\t\t  uni.sendSocketMessage({\r\n\t\t\t\tdata:JSON.stringify(data),\r\n\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:\"发送成功\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.inputInfo=\"\";\r\n\t\t\t\t},\r\n\t\t\t\tfail:res=>{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:\"发送失败\"\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete:res=>{\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.selEmiloAlert=false;\r\n\t\t\t\t\tthis.menuType=false;\r\n\t\t\t\t\tthis.commeinptFocus=false;\r\n\t\t\t\t},\r\n\t\t\t  })\r\n\t\t\t  \r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tsendRenqiMessage(number) {\r\n\t\t\t  var _this = this\r\n\t\t\t  if (!this.ifConnect) {\r\n\t\t\t    uni.showToast({\r\n\t\t\t      title: '未接入聊天系统',\r\n\t\t\t      icon: 'none'\r\n\t\t\t    });\r\n\t\t\t    return;\r\n\t\t\t  }\r\n\t\t\t   this.chatMsgUserInfo.likes=this.renqizhiInfo.likes;\r\n\t\t\t  var data={  \r\n\t\t\t\t  type:'say',  \r\n\t\t\t\t  number:number,\r\n\t\t\t\t  to_client_id:'all',\r\n\t\t\t\t  to_client_name:this.liveInfoInfo.live_name,\r\n\t\t\t\t  content:text.content,\r\n\t\t\t\t  userinfo:this.chatMsgUserInfo\r\n\t\t\t  }  \r\n\t\t\t  uni.sendSocketMessage({\r\n\t\t\t\tdata:JSON.stringify(data),\r\n\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:\"\"\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.inputInfo=\"\";\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tfail:res=>{\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle:\"发送失败\"\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete:res=>{\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.selEmiloAlert=false;\r\n\t\t\t\t\tthis.menuType=false;\r\n\t\t\t\t\tthis.commeinptFocus=false;\r\n\t\t\t\t},\r\n\t\t\t  })\r\n\t\t\t  \r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tcreateWebSocket() {\r\n\t\t\t  try {\r\n\t\t\t\t  console.error('创建聊天室链接',uni.getStorageSync(\"openid\"))\r\n\t\t\t   this.taskWebsocket=uni.connectSocket({\r\n\t\t\t      url: this.chatUrl,\r\n\t\t\t\t  data() {\r\n\t\t\t\t  \t\treturn {\r\n\t\t\t\t\t\t\t\"openid\":uni.getStorageSync(\"openid\")\r\n\t\t\t\t  \t\t};\r\n\t\t\t\t  \t},\r\n\t\t\t\t\tsuccess:res=>{\r\n\t\t\t\t\t\t this.initWebSocket();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:res=>{\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcomplete: () => {}\r\n\t\t\t    })\r\n\t\t\t  \r\n\t\t\t  } catch (e) {\r\n\t\t\t    this.reconnectWebSocket();\r\n\t\t\t  }\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// websocket登录\r\n\t\t\twensocketLogin(){\r\n\t\t\t\tvar data={  \r\n\t\t\t\t\ttype:\"login\",\r\n\t\t\t\t\tclient_name:this.chatMsgUserInfo.client_name,\r\n\t\t\t\t\troom_id:this.options.id,\r\n\t\t\t\t\t'userinfo':this.chatMsgUserInfo\r\n\t\t\t\t}\r\n\t\t\t\tdata.userinfo.suiji=data.userinfo+Math.random()*1000;\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(data),\r\n\t\t\t\t\tcomplete:res=>{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!this.is_ruchang){\r\n\t\t\t\t\t\t\tif(this.chatMsgUserInfo.client_name!='游客'){\r\n\t\t\t\t\t\t\t\tthis.inputInfo=\"进来了\";\r\n\t\t\t\t\t\t\t\tthis.sendMessage('say');\r\n\t\t\t\t\t\t\t\tthis.is_ruchang=true;\r\n\t\t\t\t\t\t\t\tconsole.error(\"is_ruchang1005编程true了\")\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selEmiloAlert=false;\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 修改多少下\r\n\t\t\tupdatelikes(likes){\r\n\t\t\t\tvar renqizhiInfo=this.renqizhiInfo;\r\n\t\t\t\tif(renqizhiInfo.likes<likes){\r\n\t\t\t\t\t// for(var a=0;a<(likes-renqizhiInfo.likes);a++){\r\n\t\t\t\t\t// \tthis.thumbsUp();\r\n\t\t\t\t\t// }\r\n\t\t\t\t\trenqizhiInfo.likes=likes;\r\n\t\t\t\t\trenqizhiInfo.likes_str=this.$tools.numFormat(renqizhiInfo.likes);;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n  \t\t\t//初始化\r\n\t\t\tinitWebSocket() {\r\n\t\t\t\t// uni.showLoading({\r\n\t\t\t\t// \t\ttitle:\"聊天室连接中\"\r\n\t\t\t\t// })   \r\n\t\t\t  var _this = this\r\n\t\t\t  uni.onSocketClose(function(res) {\r\n\t\t\t\t  _this.ifConnect = false,\r\n\t\t\t\t  uni.hideLoading()\r\n\t\t\t    if (res.reason) {\r\n\t\t\t      // uni.showToast({\r\n\t\t\t      //   title: '聊天系统连接断开：' + res.reason,\r\n\t\t\t      //   icon: 'none'\r\n\t\t\t      // });\r\n\t\t\t    }\r\n\t\t\t    if(_this.canReconnect){\r\n\t\t\t      _this.reconnectWebSocket();\r\n\t\t\t    }\r\n\t\t\t  })\r\n\t\t\t  uni.onSocketError(function(res) {\r\n\t\t\t    uni.showToast({\r\n\t\t\t      title: '聊天系统接入失败：' + res.errMsg,\r\n\t\t\t      icon: 'none'   \r\n\t\t\t    });\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t    _this.reconnectWebSocket();\r\n\t\t\t  })\r\n\t\t\t\r\n\t\t\t  uni.onSocketOpen(function(res) {\r\n\t\t\t\t  uni.hideLoading()\r\n\t\t\t      _this.ifConnect = true,\r\n\t\t\t      // uni.showToast({\r\n\t\t\t      //   title: '聊天系统接入成功',\r\n\t\t\t      //   icon: 'none'\r\n\t\t\t      // });\r\n\t\t\t\t  _this.wensocketLogin();\r\n\t\t\t      //心跳检测重置\r\n\t\t\t      heartCheck.start();\r\n\t\t\t  })\r\n\t\t\t  uni.onSocketMessage((res)=> {\r\n\t\t\t\t  uni.hideLoading()\r\n\t\t\t    var message = JSON.parse(res.data)\r\n\t\t\t    if (!message) {\r\n\t\t\t      uni.showToast({\r\n\t\t\t        title: '消息转换失败：' + res,\r\n\t\t\t        icon: 'none'\r\n\t\t\t      });\r\n\t\t\t      return\r\n\t\t\t    }\r\n\t\t\t\t\r\n\t\t\t\tif(message.number){\r\n\t\t\t\t\tmessage.type=\"renqizhi\";\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t    var type = message.type || '';\r\n\t\t\t\tconsole.log(\"asd消息\",message)\r\n\t\t\t\tif(message.content&&message.content.indexOf(\"点赞了\")==0){\r\n\t\t\t\t\tif(message.userinfo&&message.userinfo.likes){\r\n\t\t\t\t\t\tthis.updatelikes(message.userinfo.likes);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t    switch (type) {\r\n\t\t\t      // Events.php中返回的init类型的消息，将client_id发给后台进行uid绑定\r\n\t\t\t      case 'login':\r\n\t\t\t        //加入聊天\r\n\t\t\t\t\t\tthis.live_loadingIndex();\r\n\t\t\t        break;\r\n\t\t\t      case 'logout':\r\n\t\t\t        //离开聊天   \r\n\t\t\t\t\t\tthis.live_loadingIndex();\r\n\t\t\t        break;\r\n\t\t\t      case 'say':\r\n\t\t\t        //发言\r\n\t\t\t        break;\r\n\t\t\t      case 'renqizhi':\r\n\t\t\t        //礼物\r\n\t\t\t        break\r\n\t\t\t      case 'gift':\r\n\t\t\t        //礼物\r\n\t\t\t        break\r\n\t\t\t      case 'del':\r\n\t\t\t\t  console.log(\"小树消息体\",message)\r\n\t\t\t        //礼物\r\n\t\t\t\t\tvar messageList=_this.messageList;\r\n\t\t\t\t\tvar list=[];\r\n\t\t\t\t\tfor(var a=0;a<messageList.length;a++){\r\n\t\t\t\t\t\t// image    \r\n\t\t\t\t\t\t// if(message.image&&message.image!=''){\r\n\t\t\t\t\t\t// \tif(message.image!=messageList[a].image){\r\n\t\t\t\t\t\t// \t\tlist.push(messageList[a]);\r\n\t\t\t\t\t\t// \t}else if(!message.image){\r\n\t\t\t\t\t\t// \t\tlist.push(messageList[a]);\r\n\t\t\t\t\t\t// \t}    \r\n\t\t\t\t\t\t// }else{\r\n\t\t\t\t\t\t// \tif(message.content!=messageList[a].content){\r\n\t\t\t\t\t\t// \t\tlist.push(messageList[a]);\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\tif(messageList[a].type=='login'){\r\n\t\t\t\t\t\t\tlist.push(messageList[a]);\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\tif(messageList[a].userinfo.suiji&&messageList[a].userinfo.suiji!=message.content){\r\n\t\t\t\t\t\t\tlist.push(messageList[a]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_this.messageList=list;\r\n\t\t\t        break\r\n\t\t\t      default:\r\n\t\t\t        //默认\r\n\t\t\t    }\r\n\t\t\t\tvar messageList=_this.messageList;\r\n\t\t\t\tif(message.type=='del'){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tmessageList.push(message);\r\n\t\t\t\t_this.messageList=messageList;\r\n\t\t\t\t_this.scrooid=\"scrooid\"+messageList.length;\r\n\t\t\t    heartCheck.start();\r\n\t\t\t  })\r\n\t\t\t},\r\n\t\t\treconnectWebSocket() {\r\n\t\t\t  var _this = this\r\n\t\t\t  if (_this.lockReconnect) {\r\n\t\t\t    return;\r\n\t\t\t  };\r\n\t\t\t  _this.lockReconnect = true\r\n\t\t\t  //没连接上会一直重连，设置延迟避免请求过多\r\n\t\t\t  _this.timeOut && clearTimeout(_this.timeOut);\r\n\t\t\t  _this.timeOut = setTimeout(function() {\r\n\t\t\t\t  \r\n\t\t\t\t  let routes = getCurrentPages(); // 获取当前打开过的页面路由数组\r\n\t\t\t\t  let curRoute = routes[routes.length - 1].route //获取当前页面路由\r\n\t\t\t\t  if(curRoute=='pages1/live_info_1/live_info_1')\r\n\t\t\t\t  {\r\n\t\t\t\t\t    _this.createWebSocket();\r\n\t\t\t\t\t\t_this.lockReconnect = false\r\n\t\t\t\t  }else{\r\n\t\t\t\t\t  _this.timeoutObj && clearInterval(_this.timeoutObj);\r\n\t\t\t\t  }\r\n\t\t\t  \r\n\t\t\t    \r\n\t\t\t  }, 4000)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 聊天----结束\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t// --------------------对接接口开始---------------------\r\n\t\t\t// 判断是否点赞\r\n\t\t\tinitZan(){\r\n\t\t\t\tvar zanLiveIs=false;\r\n\t\t\t\tvar liveIdZan=uni.getStorageSync(\"liveIdZan\"+this.options.id);\r\n\t\t\t\tif(liveIdZan){\r\n\t\t\t\t\tthis.zanLiveIs=true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// \r\n\t\t\tlive_loadingIndex(type){\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'live_apply_id':this.options.id,//直播间id\r\n\t\t\t\t\ttype:type,//\tadd\t是\tstring\t进入直播间，add，退出直播间，out\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.live_loadingIndex, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.code == 10000) {\r\n\t\t\t\t\t\t\tthis.liveInfoInfo.live_max_member=res.result;\r\n\t\t\t\t\t\t\t// 发送\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$tools.showToast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {});\r\n\t\t\t},\r\n\t\t\t// 去直播点赞\r\n\t\t\ttoDianzan(){\r\n\t\t\t\t\r\n\t\t\t\tvar userInfo=uni.getStorageSync(\"userInfo\");\r\n\t\t\t\tif(!userInfo){\r\n\t\t\t\t\tthis.$tools.showToast(\"请先登录\");\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'live_apply_id':this.options.id,\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.live_favoritesIndex, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.code == 10000) {\r\n\t\t\t\t\t\t\tuni.setStorageSync(\"liveIdZan\"+this.options.id,\"成功\");\r\n\t\t\t\t\t\t\tthis.zanLiveIs=true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$tools.showToast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {});\r\n\t\t\t},\r\n\t\t\t// 获取直播详情\r\n\t\t\tgetLiveInfo(){\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\t'id':this.options.id,\r\n\t\t\t\t};\r\n\t\t\t\tthis.$axios\r\n\t\t\t\t\t.axios('POST', this.$paths.streamidapi, data)\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res.code == 200) {\r\n\t\t\t\t\t\t\tthis.liveInfoInfo=res.data\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.IntervalZan=setInterval(res=>{\r\n\t\t\t\t\t\t\t\tthis.jiantingClickZan();\r\n\t\t\t\t\t\t\t},2000)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.jiantingLive();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$tools.showToast(res.message);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// ---------------------------对接接口结束-----------------------\r\n\t\t\t\r\n\t\t\t// 显示图片\r\n\t\t\tshowimg() {\r\n\t\t\t\t// \r\n\t\t\t\twx.previewImage({\r\n\t\t\t\t\turls: ['/static/longteng.png'] // 需要预览的图片http链接列表\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//礼物数量加减\r\n\t\t\tgiftCountClick(type) {\r\n\t\t\t\tvar giftcount = this.giftcount;\r\n\t\t\t\tif (type == 0 && giftcount > 1) {\r\n\t\t\t\t\tgiftcount = giftcount - 1;\r\n\t\t\t\t} else if (type == 1) {\r\n\t\t\t\t\tgiftcount = giftcount + 1;\r\n\t\t\t\t}\r\n\t\t\t\tthis.giftcount = giftcount;\r\n\t\t\t},\r\n\t\t\t//礼物弹窗显示隐藏\r\n\t\t\tgiftIsClick(index) {\r\n\t\t\t\tthis.giftIs = !this.giftIs;\r\n\t\t\t},\r\n\t\t\t//礼物的点击事件\r\n\t\t\tgiftSelClick(index) {\r\n\t\t\t\tthis.giftSel = index;\r\n\t\t\t},\r\n\t\t\t// 赠送礼物\r\n\t\t\tsendclick(res) {\r\n\t\t\t},\r\n\t\t\t// 直播简介展示\r\n\t\t\tliveinfoalertlick() {\r\n\t\t\t\tthis.liveinfoalert = !this.liveinfoalert;\r\n\t\t\t},\r\n\t\t\t//语音切换\r\n\t\t\ttxt_mp3Clicl() {\r\n\t\t\t\t// 语音文字切换\r\n\t\t\t\tthis.txt_mp3 = this.txt_mp3 == 1 ? 2 : 1\r\n\t\t\t},\r\n\t\t\t// 加好点击\r\n\t\t\timgbtnClick() {\r\n\t\t\t\tthis.imgbtn = !this.imgbtn;\r\n\t\t\t\tif (this.imgbtn) {\r\n\t\t\t\t\tsetTimeout(res => {\r\n\t\t\t\t\t\tthis.animationsaIs = true;\r\n\t\t\t\t\t}, 500)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tbackpage() {\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 失去焦点\r\n\t\t\tfocusInputblur() {\r\n\t\t\t\tthis.commeinptFocus = false;\r\n\t\t\t\tthis.menuType=false;\r\n\t\t\t},\r\n\t\t\t// 聊天输入框获取焦点\r\n\t\t\tfocusInput() {\r\n\t\t\t\tthis.commeinptFocus = true;\r\n\t\t\t\tthis.$forceUpdate()\r\n\t\t\t},\r\n\t\t\t// 获取键盘高度\r\n\t\t\tgetKeyhieght() {\r\n\t\t\t\twx.onKeyboardHeightChange(res => {\r\n\t\t\t\t\tthis.keyheight = res.height\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//获取设备信息\r\n\t\t\tgetWindowInfo() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst info = wx.getSystemInfoSync();\r\n\t\t\t\t\tvar menuButton = wx.getMenuButtonBoundingClientRect();\r\n\t\t\t\t\tthis.info = info;\r\n\t\t\t\t\tthis.menuButton = menuButton;\r\n\t\t\t\t\t//计算chat的高度\r\n\t\t\t\t\tvar weiheight = uni.upx2px(450 + 140 + 30); //除了聊天框  其他的高度\r\n\t\t\t\t\tweiheight = weiheight + menuButton.height + menuButton.top + 8;\r\n\t\t\t\t\tthis.chatviewhieght = info.windowHeight - weiheight - 50;\r\n\t\t\t\t\t// 最后30  是距离视频组件的距离\r\n\t\t\t\t\tthis.chatview_top = menuButton.height + menuButton.top + 8 + uni.upx2px(450) + 30 + uni.upx2px(30);\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t},\r\n\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t\r\n\t//心跳检测\r\n\tvar heartCheck = {\r\n\t  timeout: 3000,\r\n\t  timeoutObj: null,\r\n\t  start: function() {\r\n\t    var self = this;\r\n\t    this.timeoutObj && clearInterval(this.timeoutObj);\r\n\t    this.timeoutObj = setInterval(function() {\r\n\t      //这里发送一个心跳，后端收到后，返回一个心跳消息，\r\n\t      uni.sendSocketMessage({\r\n\t        data: \"123456789\",\r\n\t\t\tcomplete:(res)=> {\r\n\t\t\t}\r\n\t      })\r\n\t    }, this.timeout)\r\n\t  },\r\n\t      stop:function(){\r\n\t          this.timeoutObj && clearInterval(this.timeoutObj)\r\n\t      }\r\n\t}\r\n\t\r\n</script>\r\n\r\n\r\n<style>\r\n\t@import url(\"liveing.css\");\r\n\t\r\n\t.henghea{\r\n\t\twidth: 750rpx;background-color: #FF8E2D;z-index: 1000;height: 100vh;\r\n\t}\r\n\t.uanpinga{\r\n\t\twidth:750rpx;height:430rpx;position: relative;\r\n\t}\r\n</style>\r\n","import mod from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveing1.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\yangfei\\\\ide\\\\HBuilderX.3.5.2.2-alpha\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./liveing1.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1711529958146\n      var cssReload = require(\"E:/yangfei/ide/HBuilderX.3.5.2.2-alpha/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}